@page
@model CSE3PAX.Pages.Manager.SITestingModel

<form method="post" id="reloadForm">
    <!-- Subject Dropdown -->
    <select asp-for="SelectedSubject" asp-items="@(new SelectList(Model.ListSubjects, "SubjectCode", "SubjectName"))">
        <option value="">Select a Subject</option>
    </select>

    <!-- Start Date Picker -->
    <div>
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate" name="StartDate" value="@Model.StartDate?.ToString("yyyy-MM-dd")">
    </div>

    <!-- End Date Picker -->
    <div>
        <label for="endDate">End Date:</label>
        <input type="date" id="endDate" name="EndDate" value="@Model.EndDate?.ToString("yyyy-MM-dd")">
    </div>

    <!-- Submission Button -->
    <button type="submit">Select Lecturer</button>
</form>


<table>
    <tr>
        <th>Email</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Adjusted Rating</th>
        <th>Load Capacity Percentage</th>
    </tr>
    @foreach (var lecturer in Model.Lecturers) // Adjust based on how you've named your collection
    {
        <tr>
            <td>@lecturer.Email</td>
            <td>@lecturer.FirstName</td>
            <td>@lecturer.LastName</td>
            <td>@lecturer.AdjustedRating</td>
            <td>@lecturer.LoadCapacityPercentage</td>
            <td>
                <button type="button" class="select-lecturer" data-email="@lecturer.Email" data-firstname="@lecturer.FirstName" data-lastname="@lecturer.LastName">Select</button>
            </td>
        </tr>
    }
</table>

<form method="post">
<div>
    <label for="selectedFirstName">First Name:</label>
    <input type="text" id="selectedFirstName" value="@Model.SelectedFirstName" readonly>
</div>
<div>
    <label for="selectedLastName">Last Name:</label>
    <input type="text" id="selectedLastName" value="@Model.SelectedLastName" readonly>
</div>
<div>
    <label for="selectedEmail">Email:</label>
    <input type="text" id="selectedEmail" value="@Model.SelectedEmail" readonly>
</div>

    <input type="hidden" name="SelectedEmail" value="@Model.SelectedEmail" />
    <input type="hidden" name="SelectedSubject" value="@Model.SelectedSubject" />
    <input type="hidden" name="StartDate" value="@Model.StartDate?.ToString("yyyy-MM-dd")" />
    <input type="hidden" name="EndDate" value="@Model.EndDate?.ToString("yyyy-MM-dd")" />



<div>
    <label for="numberOfStudents">Number of Students:</label>
    <input type="number" id="numberOfStudents" name="NumberOfStudents" value="@Model.NumberOfStudents" min="1" />
</div>

<div>
    <input type="checkbox" id="isDevelopmentRequired" name="IsDevelopmentRequired" checked="@Model.IsDevelopmentRequired" />
    <label for="isDevelopmentRequired">Is Development Required?</label>
</div>

<button type="submit" asp-page-handler="SubmitData">Submit Subject Instance</button>
</form>

<script src = "~/js/CreateSubjectInstance.js"></script>